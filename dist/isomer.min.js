/*! Isomer v0.2.5 | (c) 2014 Jordan Scales | jdan.github.io/isomer/license.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof exports?exports.Isomer=n():t.Isomer=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(6)},function(t,n,e){function r(t,n,e){return this instanceof r?(this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.z="number"==typeof e?e:0,void 0):new r(t,n,e)}r.ORIGIN=new r(0,0,0),r.prototype.translate=function(t,n,e){return new r(this.x+t,this.y+n,this.z+e)},r.prototype.scale=function(t,n,e,r){var i=this.translate(-t.x,-t.y,-t.z);return void 0===e&&void 0===r?e=r=n:r="number"==typeof r?r:1,i.x*=n,i.y*=e,i.z*=r,i.translate(t.x,t.y,t.z)},r.prototype.rotateX=function(t,n){var e=this.translate(-t.x,-t.y,-t.z),r=e.z*Math.cos(n)-e.y*Math.sin(n),i=e.z*Math.sin(n)+e.y*Math.cos(n);return e.z=r,e.y=i,e.translate(t.x,t.y,t.z)},r.prototype.rotateY=function(t,n){var e=this.translate(-t.x,-t.y,-t.z),r=e.x*Math.cos(n)-e.z*Math.sin(n),i=e.x*Math.sin(n)+e.z*Math.cos(n);return e.x=r,e.z=i,e.translate(t.x,t.y,t.z)},r.prototype.rotateZ=function(t,n){var e=this.translate(-t.x,-t.y,-t.z),r=e.x*Math.cos(n)-e.y*Math.sin(n),i=e.x*Math.sin(n)+e.y*Math.cos(n);return e.x=r,e.y=i,e.translate(t.x,t.y,t.z)},r.prototype.depth=function(){return this.x+this.y-2*this.z},r.distance=function(t,n){var e=n.x-t.x,r=n.y-t.y,i=n.z-t.z;return Math.sqrt(e*e+r*r+i*i)},t.exports=r},function(t,n,e){function r(t){"[object Array]"===Object.prototype.toString.call(t)?this.points=t:this.points=Array.prototype.slice.call(arguments)}var i=e(1);r.prototype.push=function(t){this.points.push(t)},r.prototype.reverse=function(){var t=Array.prototype.slice.call(this.points);return new r(t.reverse())},r.prototype.translate=function(){var t=arguments;return new r(this.points.map(function(n){return n.translate.apply(n,t)}))},r.prototype.rotateX=function(){var t=arguments;return new r(this.points.map(function(n){return n.rotateX.apply(n,t)}))},r.prototype.rotateY=function(){var t=arguments;return new r(this.points.map(function(n){return n.rotateY.apply(n,t)}))},r.prototype.rotateZ=function(){var t=arguments;return new r(this.points.map(function(n){return n.rotateZ.apply(n,t)}))},r.prototype.scale=function(){var t=arguments;return new r(this.points.map(function(n){return n.scale.apply(n,t)}))},r.prototype.depth=function(){var t,n=0;for(t=0;t<this.points.length;t++)n+=this.points[t].depth();return n/(this.points.length||1)},r.Rectangle=function(t,n,e){void 0===n&&(n=1),void 0===e&&(e=1);var o=new r([t,new i(t.x+n,t.y,t.z),new i(t.x+n,t.y+e,t.z),new i(t.x,t.y+e,t.z)]);return o},r.Circle=function(t,n,e){e=e||20;var o,s=new r;for(o=0;e>o;o++)s.push(new i(n*Math.cos(2*o*Math.PI/e),n*Math.sin(2*o*Math.PI/e),0));return s.translate(t.x,t.y,t.z)},r.Star=function(t,n,e,o){var s,a,h=new r;for(s=0;2*o>s;s++)a=s%2===0?n:e,h.push(new i(a*Math.cos(s*Math.PI/o),a*Math.sin(s*Math.PI/o),0));return h.translate(t.x,t.y,t.z)},t.exports=r},function(t,n,e){function r(t,n,e){this.i="number"==typeof t?t:0,this.j="number"==typeof n?n:0,this.k="number"==typeof e?e:0}r.fromTwoPoints=function(t,n){return t="undefined"==typeof t?Point.ORIGIN:t,n="undefined"==typeof t?Point.ORIGIN:n,new r(n.x-t.x,n.y-t.y,n.z-t.z)},r.crossProduct=function(t,n){var e=t.j*n.k-n.j*t.k,i=-1*(t.i*n.k-n.i*t.k),o=t.i*n.j-n.i*t.j;return new r(e,i,o)},r.dotProduct=function(t,n){return t.i*n.i+t.j*n.j+t.k*n.k},r.toPoint=function(t){return new Point(t.i,t.j,t.k)},r.add=function(t,n){return new r(t.i+n.i,t.j+n.j,t.k+n.k)},r.mult=function(t,n){return new r(t.i*n,t.j*n,t.k*n)},r.prototype.magnitude=function(){return Math.sqrt(this.i*this.i+this.j*this.j+this.k*this.k)},r.prototype.normalize=function(){var t=this.magnitude();return 0===t?new r(0,0,0):new r(this.i/t,this.j/t,this.k/t)},t.exports=r},function(t,n,e){function r(t){this.elem=t,this.ctx=this.elem.getContext("2d"),this.width=t.width,this.height=t.height}r.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},r.prototype.path=function(t,n){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(var e=1;e<t.length;e++)this.ctx.lineTo(t[e].x,t[e].y);this.ctx.closePath(),this.ctx.save(),this.ctx.globalAlpha=n.a,this.ctx.fillStyle=this.ctx.strokeStyle=n.toHex(),this.ctx.stroke(),this.ctx.fill(),this.ctx.restore()},t.exports=r},function(t,n,e){function r(t,n,e,r){this.r=parseInt(t||0),this.g=parseInt(n||0),this.b=parseInt(e||0),this.a=parseFloat(Math.round(100*r)/100||1),this.loadHSL()}r.prototype.toHex=function(){var t=(256*this.r*256+256*this.g+this.b).toString(16);return t.length<6&&(t=new Array(6-t.length+1).join("0")+t),"#"+t},r.prototype.lighten=function(t,n){n=n||new r(255,255,255);var e=new r(n.r/255*this.r,n.g/255*this.g,n.b/255*this.b,this.a);return e.l=Math.min(e.l+t,1),e.loadRGB(),e},r.prototype.loadHSL=function(){var t,n,e=this.r/255,r=this.g/255,i=this.b/255,o=Math.max(e,r,i),s=Math.min(e,r,i),a=(o+s)/2;if(o===s)t=n=0;else{var h=o-s;switch(n=a>.5?h/(2-o-s):h/(o+s),o){case e:t=(r-i)/h+(i>r?6:0);break;case r:t=(i-e)/h+2;break;case i:t=(e-r)/h+4}t/=6}this.h=t,this.s=n,this.l=a},r.prototype.loadRGB=function(){var t,n,e,r=this.h,i=this.s,o=this.l;if(0===i)t=n=e=o;else{var s=.5>o?o*(1+i):o+i-o*i,a=2*o-s;t=this._hue2rgb(a,s,r+1/3),n=this._hue2rgb(a,s,r),e=this._hue2rgb(a,s,r-1/3)}this.r=parseInt(255*t),this.g=parseInt(255*n),this.b=parseInt(255*e)},r.prototype._hue2rgb=function(t,n,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(n-t)*e:.5>e?n:2/3>e?t+(n-t)*(2/3-e)*6:t},t.exports=r},function(t,n,e){function r(t,n){n=n||{},this.canvas=new i(t),this.angle=Math.PI/6,this.scale=n.scale||70,this._calculateTransformation(),this.originX=n.originX||this.canvas.width/2,this.originY=n.originY||.9*this.canvas.height,this.lightPosition=n.lightPosition||new p(2,-1,3),this.lightAngle=this.lightPosition.normalize(),this.colorDifference=.2,this.lightColor=n.lightColor||new o(255,255,255)}var i=e(4),o=e(5),s=e(2),a=e(1),h=e(7),p=e(3);r.prototype.setLightPosition=function(t,n,e){this.lightPosition=new p(t,n,e),this.lightAngle=this.lightPosition.normalize()},r.prototype._translatePoint=function(t){var n=new a(t.x*this.transformation[0][0],t.x*this.transformation[0][1]),e=new a(t.y*this.transformation[1][0],t.y*this.transformation[1][1]),r=this.originX+n.x+e.x,i=this.originY-n.y-e.y-t.z*this.scale;return new a(r,i)},r.prototype.add=function(t,n){if("[object Array]"==Object.prototype.toString.call(t))for(var e=0;e<t.length;e++)this.add(t[e],n);else if(t instanceof s)this._addPath(t,n);else if(t instanceof h)for(var r=t.orderedPaths(),i=0;i<r.length;i++)this._addPath(r[i],n)},r.prototype._addPath=function(t,n){n=n||new o(120,120,120);var e=p.fromTwoPoints(t.points[1],t.points[0]),r=p.fromTwoPoints(t.points[2],t.points[1]),i=p.crossProduct(e,r).normalize(),s=p.dotProduct(i,this.lightAngle),a=n.lighten(s*this.colorDifference,this.lightColor);this.canvas.path(t.points.map(this._translatePoint.bind(this)),a)},r.prototype._calculateTransformation=function(){this.transformation=[[this.scale*Math.cos(this.angle),this.scale*Math.sin(this.angle)],[this.scale*Math.cos(Math.PI-this.angle),this.scale*Math.sin(Math.PI-this.angle)]]},r.Canvas=i,r.Color=o,r.Path=s,r.Point=a,r.Shape=h,r.Vector=p,t.exports=r},function(t,n,e){function r(t){"[object Array]"===Object.prototype.toString.call(t)?this.paths=t:this.paths=Array.prototype.slice.call(arguments)}var i=e(2),o=e(1),s=e(3);r.prototype.push=function(t){this.paths.push(t)},r.prototype.translate=function(){var t=arguments;return new r(this.paths.map(function(n){return n.translate.apply(n,t)}))},r.prototype.rotateX=function(){var t=arguments;return new r(this.paths.map(function(n){return n.rotateX.apply(n,t)}))},r.prototype.rotateY=function(){var t=arguments;return new r(this.paths.map(function(n){return n.rotateY.apply(n,t)}))},r.prototype.rotateZ=function(){var t=arguments;return new r(this.paths.map(function(n){return n.rotateZ.apply(n,t)}))},r.prototype.scale=function(){var t=arguments;return new r(this.paths.map(function(n){return n.scale.apply(n,t)}))},r.prototype.orderedPaths=function(){var t=this.paths.slice();return t.sort(function(t,n){return n.depth()-t.depth()})},r.extrude=function(t,n){n="number"==typeof n?n:1;var e,o=t.translate(0,0,n),s=new r;for(s.push(t.reverse()),s.push(o),e=0;e<t.points.length;e++)s.push(new i([o.points[e],t.points[e],t.points[(e+1)%t.points.length],o.points[(e+1)%o.points.length]]));return s},r.Prism=function(t,n,e,s){n="number"==typeof n?n:1,e="number"==typeof e?e:1,s="number"==typeof s?s:1;var a=new r,h=new i([t,new o(t.x+n,t.y,t.z),new o(t.x+n,t.y,t.z+s),new o(t.x,t.y,t.z+s)]);a.push(h),a.push(h.reverse().translate(0,e,0));var p=new i([t,new o(t.x,t.y,t.z+s),new o(t.x,t.y+e,t.z+s),new o(t.x,t.y+e,t.z)]);a.push(p),a.push(p.reverse().translate(n,0,0));var u=new i([t,new o(t.x+n,t.y,t.z),new o(t.x+n,t.y+e,t.z),new o(t.x,t.y+e,t.z)]);return a.push(u.reverse()),a.push(u.translate(0,0,s)),a},r.Pyramid=function(t,n,e,s){n="number"==typeof n?n:1,e="number"==typeof e?e:1,s="number"==typeof s?s:1;var a=new r,h=new i([t,new o(t.x+n,t.y,t.z),new o(t.x+n/2,t.y+e/2,t.z+s)]);a.push(h),a.push(h.rotateZ(t.translate(n/2,e/2),Math.PI));var p=new i([t,new o(t.x+n/2,t.y+e/2,t.z+s),new o(t.x,t.y+e,t.z)]);return a.push(p),a.push(p.rotateZ(t.translate(n/2,e/2),Math.PI)),a},r.Cylinder=function(t,n,e,o){n="number"==typeof n?n:1;var s=i.Circle(t,n,e),a=r.extrude(s,o);return a},r.Sphere=function(t,n,e){t="undefined"==typeof t?o.ORIGIN:t,n="number"==typeof n?n:.5,e="number"==typeof e?e:4;var a=s.fromTwoPoints(o.ORIGIN,t),h=new r,p=e,u=Math.sqrt(2),c=Math.sqrt(6),l=new s(0,0,1,1),f=new s(0,2*u/3,-1/3,1),y=new s(-c/3,-u/3,-1/3,1),d=new s(c/3,-u/3,-1/3,1);return divideTriangle=function(t,e,r,o,h){if(!(o>0)){var p=new i([s.toPoint(s.add(s.mult(t,n),a)),s.toPoint(s.add(s.mult(e,n),a)),s.toPoint(s.add(s.mult(r,n),a))]);return h.push(p),h}var u=s.add(t,e).normalize(),c=s.add(t,r).normalize(),l=s.add(e,r).normalize();divideTriangle(t,u,c,o-1,h),divideTriangle(r,c,l,o-1,h),divideTriangle(e,l,u,o-1,h),divideTriangle(u,l,c,o-1,h)},divideTriangle(l,f,y,p,h),divideTriangle(d,y,f,p,h),divideTriangle(l,d,f,p,h),divideTriangle(l,y,d,p,h),h},t.exports=r}])});